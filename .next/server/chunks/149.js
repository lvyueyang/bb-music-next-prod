exports.id=149,exports.ids=[149],exports.modules={9386:t=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],i=0;i<t.length;i++)e.push(255&t.charCodeAt(i));return e},bytesToString:function(t){for(var e=[],i=0;i<t.length;i++)e.push(String.fromCharCode(t[i]));return e.join("")}}};t.exports=e},3369:t=>{!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&i.rotl(t,8)|4278255360&i.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=i.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],i=0,r=0;i<t.length;i++,r+=8)e[r>>>5]|=t[i]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],i=0;i<32*t.length;i+=8)e.push(t[i>>>5]>>>24-i%32&255);return e},bytesToHex:function(t){for(var e=[],i=0;i<t.length;i++)e.push((t[i]>>>4).toString(16)),e.push((15&t[i]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],i=0;i<t.length;i+=2)e.push(parseInt(t.substr(i,2),16));return e},bytesToBase64:function(t){for(var i=[],r=0;r<t.length;r+=3)for(var n=t[r]<<16|t[r+1]<<8|t[r+2],s=0;s<4;s++)8*r+6*s<=8*t.length?i.push(e.charAt(n>>>6*(3-s)&63)):i.push("=");return i.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/ig,"");for(var i=[],r=0,n=0;r<t.length;n=++r%4)0!=n&&i.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*n+8)-1)<<2*n|e.indexOf(t.charAt(r))>>>6-2*n);return i}};t.exports=i}()},2589:t=>{function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */t.exports=function(t){return null!=t&&(e(t)||"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))||!!t._isBuffer)}},3325:(t,e,i)=>{!function(){var e=i(3369),r=i(9386).utf8,n=i(2589),s=i(9386).bin,a=function(t,i){t.constructor==String?t=i&&"binary"===i.encoding?s.stringToBytes(t):r.stringToBytes(t):n(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var o=e.bytesToWords(t),u=8*t.length,c=1732584193,l=-271733879,h=-1732584194,f=271733878,d=0;d<o.length;d++)o[d]=(o[d]<<8|o[d]>>>24)&16711935|(o[d]<<24|o[d]>>>8)&4278255360;o[u>>>5]|=128<<u%32,o[(u+64>>>9<<4)+14]=u;for(var g=a._ff,p=a._gg,b=a._hh,y=a._ii,d=0;d<o.length;d+=16){var v=c,m=l,_=h,w=f;c=g(c,l,h,f,o[d+0],7,-680876936),f=g(f,c,l,h,o[d+1],12,-389564586),h=g(h,f,c,l,o[d+2],17,606105819),l=g(l,h,f,c,o[d+3],22,-1044525330),c=g(c,l,h,f,o[d+4],7,-176418897),f=g(f,c,l,h,o[d+5],12,1200080426),h=g(h,f,c,l,o[d+6],17,-1473231341),l=g(l,h,f,c,o[d+7],22,-45705983),c=g(c,l,h,f,o[d+8],7,1770035416),f=g(f,c,l,h,o[d+9],12,-1958414417),h=g(h,f,c,l,o[d+10],17,-42063),l=g(l,h,f,c,o[d+11],22,-1990404162),c=g(c,l,h,f,o[d+12],7,1804603682),f=g(f,c,l,h,o[d+13],12,-40341101),h=g(h,f,c,l,o[d+14],17,-1502002290),l=g(l,h,f,c,o[d+15],22,1236535329),c=p(c,l,h,f,o[d+1],5,-165796510),f=p(f,c,l,h,o[d+6],9,-1069501632),h=p(h,f,c,l,o[d+11],14,643717713),l=p(l,h,f,c,o[d+0],20,-373897302),c=p(c,l,h,f,o[d+5],5,-701558691),f=p(f,c,l,h,o[d+10],9,38016083),h=p(h,f,c,l,o[d+15],14,-660478335),l=p(l,h,f,c,o[d+4],20,-405537848),c=p(c,l,h,f,o[d+9],5,568446438),f=p(f,c,l,h,o[d+14],9,-1019803690),h=p(h,f,c,l,o[d+3],14,-187363961),l=p(l,h,f,c,o[d+8],20,1163531501),c=p(c,l,h,f,o[d+13],5,-1444681467),f=p(f,c,l,h,o[d+2],9,-51403784),h=p(h,f,c,l,o[d+7],14,1735328473),l=p(l,h,f,c,o[d+12],20,-1926607734),c=b(c,l,h,f,o[d+5],4,-378558),f=b(f,c,l,h,o[d+8],11,-2022574463),h=b(h,f,c,l,o[d+11],16,1839030562),l=b(l,h,f,c,o[d+14],23,-35309556),c=b(c,l,h,f,o[d+1],4,-1530992060),f=b(f,c,l,h,o[d+4],11,1272893353),h=b(h,f,c,l,o[d+7],16,-155497632),l=b(l,h,f,c,o[d+10],23,-1094730640),c=b(c,l,h,f,o[d+13],4,681279174),f=b(f,c,l,h,o[d+0],11,-358537222),h=b(h,f,c,l,o[d+3],16,-722521979),l=b(l,h,f,c,o[d+6],23,76029189),c=b(c,l,h,f,o[d+9],4,-640364487),f=b(f,c,l,h,o[d+12],11,-421815835),h=b(h,f,c,l,o[d+15],16,530742520),l=b(l,h,f,c,o[d+2],23,-995338651),c=y(c,l,h,f,o[d+0],6,-198630844),f=y(f,c,l,h,o[d+7],10,1126891415),h=y(h,f,c,l,o[d+14],15,-1416354905),l=y(l,h,f,c,o[d+5],21,-57434055),c=y(c,l,h,f,o[d+12],6,1700485571),f=y(f,c,l,h,o[d+3],10,-1894986606),h=y(h,f,c,l,o[d+10],15,-1051523),l=y(l,h,f,c,o[d+1],21,-2054922799),c=y(c,l,h,f,o[d+8],6,1873313359),f=y(f,c,l,h,o[d+15],10,-30611744),h=y(h,f,c,l,o[d+6],15,-1560198380),l=y(l,h,f,c,o[d+13],21,1309151649),c=y(c,l,h,f,o[d+4],6,-145523070),f=y(f,c,l,h,o[d+11],10,-1120210379),h=y(h,f,c,l,o[d+2],15,718787259),l=y(l,h,f,c,o[d+9],21,-343485551),c=c+v>>>0,l=l+m>>>0,h=h+_>>>0,f=f+w>>>0}return e.endian([c,l,h,f])};a._ff=function(t,e,i,r,n,s,a){var o=t+(e&i|~e&r)+(n>>>0)+a;return(o<<s|o>>>32-s)+e},a._gg=function(t,e,i,r,n,s,a){var o=t+(e&r|i&~r)+(n>>>0)+a;return(o<<s|o>>>32-s)+e},a._hh=function(t,e,i,r,n,s,a){var o=t+(e^i^r)+(n>>>0)+a;return(o<<s|o>>>32-s)+e},a._ii=function(t,e,i,r,n,s,a){var o=t+(i^(e|~r))+(n>>>0)+a;return(o<<s|o>>>32-s)+e},a._blocksize=16,a._digestsize=16,t.exports=function(t,i){if(null==t)throw Error("Illegal argument "+t);var r=e.wordsToBytes(a(t,i));return i&&i.asBytes?r:i&&i.asString?s.bytesToString(r):e.bytesToHex(r)}}()},8995:(t,e)=>{"use strict";Object.defineProperty(e,"l",{enumerable:!0,get:function(){return function t(e,i){return i in e?e[i]:"then"in e&&"function"==typeof e.then?e.then(e=>t(e,i)):"function"==typeof e&&"default"===i?e:void 0}}})},3586:(t,e,i)=>{"use strict";i.a(t,async(t,r)=>{try{i.d(e,{U:()=>c});var n=i(5070),s=i(4466),a=i(2644),o=i(9648),u=t([n,o]);[n,o]=u.then?(await u)():u;class c{constructor(t){this.getConfig=async()=>{let[t,e]=await Promise.all([this.client.getSignData(),this.client.getSpiData()]);return{spi_data:e,sign_data:t}},this.setConfig=async t=>{this.client.setSignData({img_key:t.bili_sign_img_key,sub_key:t.bili_sign_sub_key}),this.client.setSpiData({b_3:t.bili_spi_b3,b_4:t.bili_spi_b4})},this.search=async t=>{let e=await this.client.search(t),i={current:e.page,total:e.numResults,pageSize:e.pagesize,data:[]};for(let t of e.result||[])["ketang"].includes(t.type)||i.data.push({id:(0,a.bT)(t.aid,t.bvid),cover:t.pic,name:t.title,duration:(0,a.xh)(t.duration),author:t.author,origin:s.F.Bili,musicList:[]});return i},this.searchDetail=async t=>{let e=(0,a.fA)(t),i=await this.client.getVideoDetail(e.aid,e.bvid),r={id:(0,a.De)(i.aid,i.bvid,i.cid),cover:i.pic,name:i.title,duration:i.duration,author:"",origin:s.F.Bili,type:s.S.Music};return i.videos>0&&(r.id=(0,a.bT)(i.aid,i.bvid),r.type=s.S.Order,r.musicList=i.pages.map(t=>({id:(0,a.De)(i.aid,i.bvid,t.cid),cover:t.first_frame,name:t.part,duration:t.duration,author:"",origin:s.F.Bili}))),r},this.getMusicFile=async t=>{let e=(0,a.fA)(t),i=await this.client.getVideoUrl(e.aid,e.bvid,e.cid);if(i?.durl?.length){let t=i.durl[0].url;return await o.default.get(t,{headers:{Referer:"https://www.bilibili.com/","User-Agent":n.Z},responseType:"stream"})}},this.client=new n.g,this.setConfig(t)}}r()}catch(t){r(t)}})},2644:(t,e,i)=>{"use strict";i.d(e,{De:()=>a,bT:()=>s,fA:()=>n,xh:()=>o});class r{constructor(){this.aid="",this.bvid="",this.cid=""}}function n(t){let e=t.split("_"),i=new r;return e.length<2?(console.error("ID 格式不正确"),new r):(i.aid=e[0],i.bvid=e[1],e.length>2&&(i.cid=e[2]),i)}function s(t,e){return`${t}_${e}`}function a(t,e,i){return`${t}_${e}_${i}`}function o(t){if(""===t)return 0;let e=t.split(":");if(e.length<2)return 0;let i=parseInt(e[0],10);if(isNaN(i))return 0;let r=parseInt(e[1],10);return isNaN(r)?0:60*i+r}},6828:(t,e,i)=>{"use strict";i.a(t,async(t,r)=>{try{i.d(e,{k:()=>o});var n=i(4466),s=i(3586),a=t([s]);function o(t,e){if(t===n.F.Bili)return new s.U(e);throw Error(`未知歌曲源: ${t}`)}s=(a.then?(await a)():a)[0],r()}catch(t){r(t)}})},488:(t,e,i)=>{"use strict";function r(t){return{code:200,msg:"success",data:t}}function n(t,e=500,i){return{code:e,msg:t,err:i}}i.d(e,{Lx:()=>n,pE:()=>r}),i(4466)},5070:(t,e,i)=>{"use strict";i.a(t,async(t,r)=>{try{i.d(e,{Z:()=>o,g:()=>u});var n=i(9648),s=i(6406),a=t([n]);n=(a.then?(await a)():a)[0];let o="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36";class u{constructor(){this.getCookie=()=>this.spiData?`buvid4=${this.spiData.b_4}; buvid3=${this.spiData.b_3};`:"",this.setSignData=t=>{this.signData=t},this.setSpiData=t=>{this.spiData=t};let t=n.default.create();t.defaults.headers.common["User-Agent"]=o,t.interceptors.request.use(t=>(t.headers.Cookie=this.getCookie(),this.spiData||console.warn("spidata 为空",t.url),t)),this.request=t}async getSignData(){let{data:{wbi_img:{img_url:t,sub_url:e}}}=(await this.request.get("https://api.bilibili.com/x/web-interface/nav")).data,i={img_key:t.slice(t.lastIndexOf("/")+1,t.lastIndexOf(".")),sub_key:e.slice(e.lastIndexOf("/")+1,e.lastIndexOf("."))};return this.setSignData(i),i}async getSpiData(){let t=(await this.request.get("https://api.bilibili.com/x/frontend/finger/spi")).data.data;return this.setSpiData(t),t}sign(t){let e=this.signData;if(e)return(0,s.f)(t,e.img_key,e.sub_key);console.error("请先获取认证秘钥 signData")}async search(t){return(await this.request.get("https://api.bilibili.com/x/web-interface/wbi/search/type",{params:this.sign({search_type:"video",keyword:t.keyword,page:t.current+""})}).catch(async t=>(console.log(t),await Promise.reject(t)))).data.data}async getVideoDetail(t,e){return(await this.request.get("https://api.bilibili.com/x/web-interface/view",{params:this.sign({aid:t,bvid:e})})).data.data}async getVideoUrl(t,e,i){return(await this.request.get("https://api.bilibili.com/x/player/wbi/playurl",{params:this.sign({aid:t,bvid:e,cid:i})})).data.data}}r()}catch(t){r(t)}})},6406:(t,e,i)=>{"use strict";i.d(e,{f:()=>o});var r=i(3325),n=i.n(r);let s=[46,47,18,2,53,8,23,32,15,50,10,31,58,3,45,35,27,43,5,49,33,9,42,19,29,28,14,39,12,38,41,13,37,48,7,16,24,55,40,61,26,17,0,1,60,51,30,4,22,25,54,21,56,59,6,63,57,62,11,36,20,34,44,52],a=t=>s.map(e=>t[e]).join("").slice(0,32);function o(t,e,i){let r=a(e+i),s=Math.round(Date.now()/1e3),o=/[!'()*]/g;Object.assign(t,{wts:s});let u=Object.keys(t).sort().map(e=>{let i=t[e].toString().replace(o,"");return`${encodeURIComponent(e)}=${encodeURIComponent(i)}`}).join("&"),c=n()(u+r);return{...t,wts:s,w_rid:c}}},4466:(t,e,i)=>{"use strict";var r,n;i.d(e,{F:()=>r,S:()=>n}),function(t){t.Bili="bili",t.YouTube="youTube"}(r||(r={})),function(t){t.Music="music",t.Order="order"}(n||(n={}))},702:(t,e)=>{"use strict";var i;Object.defineProperty(e,"x",{enumerable:!0,get:function(){return i}}),function(t){t.PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE"}(i||(i={}))},8657:(t,e,i)=>{"use strict";t.exports=i(145)}};